@page
@model CmsHeadless.Pages.Category.EditCategoryModel
@{
}

<h1>Form Edit Category</h1>
@{
    if(EditCategoryModel.lastEdit>0 && ModelState.ErrorCount == 0)
    {
        <p>Categoria modificata con successo</p>
    }
    
}
@if(ModelState.ErrorCount > 0)
    {
        @Html.ValidationSummary(false, "", new { @class = "text-danger font-weight-bold" });
    }
<form method="post" enctype="multipart/form-data">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
     <div class="form-group">
        <label asp-for="_formEditCategoryModel.Name" class="control-label"></label>
        <input asp-for="_formEditCategoryModel.Name" class="form-control" value="@Model.category.Name" required/>
        <span asp-validation-for="_formEditCategoryModel.Name" class="text-danger"></span>
    </div>
    
    <div class="form-group">
        <label asp-for="_formEditCategoryModel.Description" class="control-label"></label>
        <input asp-for="_formEditCategoryModel.Description" class="form-control" value="@Model.category.Description"/>
        <span asp-validation-for="_formEditCategoryModel.Description" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="_formEditCategoryModel.CreationDate" class="control-label"></label>
        <input asp-for="_formEditCategoryModel.CreationDate" class="form-control" required value="@Model.CreationDate"/>
        <span asp-validation-for="_formEditCategoryModel.CreationDate" class="text-danger"></span>
    </div>
    <div class="col-md-6">  
        <div class="form-group">  
            <label asp-for="_formEditCategoryModel.Media" class="control-label">Choose file</label>  
            <input asp-for="_formEditCategoryModel.Media" class="custom-file-input" value="@Model.category.Media">  
            <span asp-validation-for="_formEditCategoryModel.Media" class="text-danger"></span>  
        </div>  
    </div>
     <div class="form-group">
        <label asp-for="_formEditCategoryModel.CategoryParentId" class="control-label"></label>
        <select asp-for="_formEditCategoryModel.CategoryParentId" class="form-control">
            @{
                foreach(var i in Model.CategoryAvailable)
                {
                    if (@i.CategoryId == @Model.category.CategoryId)
                    {
                        <option selected value="@i.CategoryId" id="@i.CategoryId">@i.Name</option>
                    }
                    else
                    {
                        <option selected value="@i.CategoryId" id="@i.CategoryId">@i.Name</option>
                    }
                    
                    
                }
            }
        </select>
        <span asp-validation-for="_formEditCategoryModel.CategoryParentId" class="text-danger"></span>
    </div>

   
    <div class="form-group">
        <input type="submit" value="Edit" asp-route-categoryId="@EditCategoryModel.EditCategoryId" asp-page-handler="Edit" class="btn btn-primary" />
    </div>
</form>
<a href="../Category/">Return to category pages</a>